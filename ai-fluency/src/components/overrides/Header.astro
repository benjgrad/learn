---
import Default from '@astrojs/starlight/components/Header.astro';

const route = Astro.locals.starlightRoute;
const slug = route.slug || route.id || '';

// Determine current level from URL slug for the accent bar color
let levelNum = -1;
const levelMatch = slug.match(/^level-(\d+)/);
if (levelMatch) {
  levelNum = parseInt(levelMatch[1], 10);
} else if (slug.startsWith('foundations')) {
  levelNum = 0;
}
---

<div class="header-override">
  <div
    class="accent-bar"
    style={levelNum >= 0 ? `background: var(--level-${levelNum});` : undefined}
    aria-hidden="true"
  ></div>
  <Default><slot /></Default>
</div>

<style>
  .header-override {
    display: contents;
  }

  .accent-bar {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    height: 3px;
    z-index: 100;
    background: var(--sl-color-accent);
  }
</style>

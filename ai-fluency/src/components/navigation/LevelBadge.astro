---
import levels from '../../data/levels.json';

interface Props {
  level: number;
  size?: 'sm' | 'md' | 'lg';
}

interface Level {
  number: number;
  title: string;
  color: string;
}

const { level, size = 'md' } = Astro.props;
const typedLevels = levels as Level[];
const levelData = typedLevels.find((l) => l.number === level);
const color = levelData?.color || '#6b7280';
const label = level === 0 ? 'Foundations' : `L${level}`;
const fullTitle = levelData?.title || `Level ${level}`;
---

<span
  class:list={['level-badge', `level-badge--${size}`]}
  style={`--badge-color: ${color};`}
  title={fullTitle}
>
  {label}
</span>

<style>
  .level-badge {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    border-radius: 9999px;
    font-weight: 600;
    background-color: var(--badge-color);
    color: #fff;
    white-space: nowrap;
    line-height: 1;
  }

  .level-badge--sm {
    font-size: 0.625rem;
    padding: 0.125rem 0.375rem;
    min-width: 1.25rem;
    height: 1.25rem;
  }

  .level-badge--md {
    font-size: 0.75rem;
    padding: 0.1875rem 0.5rem;
    min-width: 1.5rem;
    height: 1.5rem;
  }

  .level-badge--lg {
    font-size: 0.875rem;
    padding: 0.25rem 0.625rem;
    min-width: 1.875rem;
    height: 1.875rem;
  }
</style>
